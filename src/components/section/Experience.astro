---
import Section from "@/components/Section.astro";
import { work } from "@/cv.json";
---

<Section title="Experiencia" class="experience-section">
  <ul>
    {work.map(({ name, startDate, endDate, position, summary, highlights }) => {
      const years = `${startDate ? new Date(startDate).getFullYear() : "Unknown"} - ${endDate ? new Date(endDate).getFullYear() : "Present"}`;

      return (
        <li>
          <article>
            <header>
              <div>
                <h3>{name}</h3>
                <h4>{position}</h4>
              </div>
              <time>{years}</time>
            </header>
            <footer>
              <p>{summary}</p>
              {highlights?.length > 0 && (
                <ul>
                 {highlights.map((highlight) => <li> {highlight}</li>)}
                </ul>
              )}
            </footer>
          </article>
        </li>
      );
    })}
  </ul>
</Section>

<style>
  ul { flex-direction: column; gap: 32px; }
  h3 { color: #5845eb; font-weight: 600; }
  h4 { color: #0c0c0c; font-weight: 400; }
  header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 4px; }
  time { font-size: 0.85rem; color: #5845eb; }
  footer ul { margin-top: 8px; padding-left: 20px; list-style: disc; }
  footer li { color: #0e0d0d; }
  footer p { text-align: justify; }
</style>
